local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local NeonGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local BG = Instance.new("Frame", NeonGui)

-- Giao diện neon
BG.BackgroundColor3 = Color3.fromRGB(0.098, 0.098, 0.098)
BG.BorderColor3 = Color3.fromRGB(0.058, 0.058, 0.058)
BG.BorderSizePixel = 2
BG.Position = UDim2.new(0.149, 0, 0.82, 0)
BG.Size = UDim2.new(0, 210, 0, 127)
BG.Active = true
BG.Draggable = true

local Title = Instance.new("TextLabel", BG)
Title.BackgroundColor3 = Color3.fromRGB(180, 0, 255) -- Màu tím
Title.BorderColor3 = Color3.fromRGB(100, 0, 200)
Title.Size = UDim2.new(0, 210, 0, 33)
Title.Font = Enum.Font.Highway
Title.Text = "Neon"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextStrokeColor3 = Color3.fromRGB(80, 0, 180) -- Viền màu tím
Title.TextStrokeTransparency = 0

local Toggle = Instance.new("TextButton", BG)
Toggle.BackgroundColor3 = Color3.fromRGB(180, 0, 255)
Toggle.BorderColor3 = Color3.fromRGB(100, 0, 200)
Toggle.Position = UDim2.new(0.15, 0, 0.37, 0)
Toggle.Size = UDim2.new(0, 146, 0, 36)
Toggle.Font = Enum.Font.Highway
Toggle.Text = "Toggle"
Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
Toggle.TextScaled = true
Toggle.TextStrokeColor3 = Color3.fromRGB(80, 0, 180) -- Viền màu tím

local StatusPF = Instance.new("TextLabel", BG)
StatusPF.BackgroundTransparency = 1
StatusPF.Position = UDim2.new(0.31, 0, 0.71, 0)
StatusPF.Size = UDim2.new(0, 56, 0, 20)
StatusPF.Font = Enum.Font.Highway
StatusPF.Text = "Status:"
StatusPF.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusPF.TextScaled = true

local Status = Instance.new("TextLabel", BG)
Status.BackgroundTransparency = 1
Status.Position = UDim2.new(0.58, 0, 0.71, 0)
Status.Size = UDim2.new(0, 56, 0, 20)
Status.Font = Enum.Font.Highway
Status.Text = "off"
Status.TextColor3 = Color3.fromRGB(170, 0, 0)
Status.TextScaled = true

local Clipon = false

-- Tăng tốc độ di chuyển khi Shift được nhấn
UserInputService.InputBegan:Connect(function(input, processed)
    if input.KeyCode == Enum.KeyCode.LeftShift then
        if Status.Text == "off" then
            Clipon = true
            Status.Text = "on"
            Status.TextColor3 = Color3.fromRGB(0, 255, 0)
            
            -- Tăng tốc độ di chuyển lên 50
            local character = LocalPlayer.Character
            if character and character:FindFirstChild("Humanoid") then
                character.Humanoid.WalkSpeed = 50
            end

            -- Tạo hiệu ứng viền nhấp nháy 7 màu
            local edge = Instance.new("Frame", BG)
            edge.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            edge.BorderSizePixel = 5
            edge.Size = UDim2.new(1, 0, 1, 0)
            edge.BackgroundTransparency = 0
            edge.ZIndex = -1

            local colors = {Color3.fromRGB(255, 0, 0), Color3.fromRGB(255, 255, 0), Color3.fromRGB(0, 255, 0), 
                            Color3.fromRGB(0, 255, 255), Color3.fromRGB(0, 0, 255), Color3.fromRGB(255, 0, 255), 
                            Color3.fromRGB(255, 255, 255)}

            local idx = 1
            local tweenTime = 0.1
            local runCount = 0

            -- Tạo hiệu ứng nhấp nháy 7 màu
            local function tweenColor()
                RunService.Heartbeat:Connect(function()
                    if Clipon then
                        edge.BackgroundColor3 = colors[idx]
                        idx = idx + 1
                        if idx > #colors then
                            idx = 1
                        end
                    end
                end)
            end

            tweenColor()
        end
    end
end)

UserInputService.InputEnded:Connect(function(input, processed)
    if input.KeyCode == Enum.KeyCode.LeftShift then
        Clipon = false
        Status.Text = "off"
        Status.TextColor3 = Color3.fromRGB(170, 0, 0)
        
        -- Đặt lại tốc độ di chuyển
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            character.Humanoid.WalkSpeed = 16 -- Tốc độ mặc định của nhân vật
        end

        -- Mờ dần hiệu ứng viền
        local edge = BG:FindFirstChildOfClass("Frame")
        if edge then
            local fadeTween = game:GetService("TweenService"):Create(
                edge, 
                TweenInfo.new(2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), 
                {BackgroundTransparency = 1}
            )
            fadeTween:Play()
            fadeTween.Completed:Connect(function()
                edge:Destroy()
            end)
        end
    end
end)
